# CN PII anonymization PRD

## 1. 文档信息

| 项目 | 内容 |
|------|------|
| **文档名称** | CN PII anonymization PRD |
| **版本** | v1.0 |
| **日期** | 2026-02-11 |
| **状态** | 初稿 |

---

## 2. 需求背景

在处理包含中国大陆个人身份信息（PII）的文本或图片时，需要对敏感信息进行脱敏处理。本功能专注于实现核心逻辑，通过识别文本或图片中的特定PII类型（如手机号、身份证号、邮箱等），自动对识别区域进行马赛克处理，返回处理后的新文本或图片。

---

## 3. 功能目标

- **核心目标**：实现文本或图片中PII信息的自动识别与马赛克处理
- **基础支持类型**：中国大陆公民的手机号、身份证号、邮箱地址、银行卡号、护照号
- **高级支持类型**：中国大陆公民的个人姓名、详细地址
- **输出**：返回马赛克处理后的新文本或图片
- **进阶目标**：API服务器搭建、并发处理、用户认证等

---

## 4. 功能范围

### 4.1 支持识别的PII类型

| PII类型 | 识别方式 | 优先级 |
|---------|----------|--------|
| 手机号 | 正则表达式 + OCR | P0 |
| 身份证号 | 正则表达式 + OCR | P0 |
| 银行卡号 | 正则表达式 + OCR | P0 |
| 护照号 | 正则表达式 + OCR | P0 |
| 邮箱地址 | 正则表达式 + OCR | P1 |
| 详细地址 | NER + OCR | P2 |
| 个人姓名 | NER + OCR | P2 |

### 4.2 文本马赛克处理方式

| 方式 | 描述 | 支持 |
|------|------|------|
| 替换为* | 将指定位置的字符替换为星号，可指定保留前几位和后几位 | ✓ |
| 替换为假名 | 可选高级功能 | ✓ |


### 4.3 图片马赛克处理方式

| 方式 | 描述 | 支持 |
|------|------|------|
| 像素块马赛克 | 将识别区域划分为像素块并取平均色 | ✓ |
| 模糊处理 | 高斯模糊 | ✓ |
| 纯色覆盖 | 用指定颜色覆盖 | ✓ |


## 5. 边界情况处理

| 场景 | 处理策略 |
|------|----------|
| 文本或图片中无PII | 支持返回原文本或图片 |
| OCR识别失败 | 抛出异常，返回错误信息 |
| 部分区域识别失败 | 记录警告，继续处理其他区域 |
| PII区域重叠 | 合并为一个大区域处理 |
| 图片格式不支持 | 抛出异常，提示支持的格式 |

---

## 6. 性能指标

| 指标 | 目标值 |
|------|--------|
| 单张图片处理时间 | < 10秒（1080p图片） |
| PII识别准确率 | > 99% |


